package org.traccar.protocol;

import org.junit.Test;
import org.traccar.ProtocolTest;

public class Gl200BinaryProtocolDecoderTest extends ProtocolTest {

    @Test
    public void testDecode() throws Exception {

        Gl200BinaryProtocolDecoder decoder = new Gl200BinaryProtocolDecoder(null);

        verifyPosition(decoder, binary(
                "2b4556542d00fc1fbf0063450102020956325403000343056437f8220700000200000000010000160100f2007eff75a1f0025c6b1a07e1080108241a02680003189c1ac500000000000002100800000000000000000007e1080108241a19e24e4e0d0a"));

        verifyPositions(decoder, binary(
                "2b5253500700fdffbf00731f0109070a56155d0214015f020000000000000000000000000000000000003262000000000011091001010000000136024801638811028b5b1507e3090307021302840001044c095100000400000011560800000000000000000007e3090307021478bdedfd0d0a"));

        verifyNotNull(decoder, binary(
                "2B5253500300FC1FFF0064450102020867623130302D446F642F442105007018217345005F010100000001100045073C4D4101DB86BD07E106130B2B0F0460000018770013000000030000000106020F2300002714301107E106130B2B1003424EFB0D0A"));

        verifyPositions(decoder, binary(
                "2b5253500700fc1fbf005d4501020209563254030003430564377e42071001000000000000007eff75a151025c6a8107e10801081a2a02680003189c1ac500000000000002100700000000000000000007e1080108241019e17ebe0d0a"));

        verifyAttributes(decoder, binary(
                "2b494e4601fd7f0076676231303000000045010202090104020500004100054007e107150b061d0000003f010e02580000000000d0312a1013648935103226313921591f1200000000000302680003189c1ac3001b02680003189c1ac4000d02680003189c1ac5001207e107150b0d3704f658060d0a"));

        verifyPosition(decoder, binary(
                "2b4556540c00fc1fbf005c4501010108563254030003430564312a41090100000000003f007dff75a11a025c6a7807e1070a14041202680003189c1ac500000000000000000000000000000000000007e1070b041134054e5c6e0d0a"));

        verifyPosition(decoder,binary(
                "2b4556540c00fc1fbf005c1f0301090356155d021401200500315f1100010000020900af025201645726028b15bb07e3081c0b06030284000108980b9f00000307000002210500000000000000000007e3081c0b0e1c25e0be320d0a"));

        // OBD Event
        verifyAttributes(decoder,binary(
                    "2b4f424404000000fd008d1f0109070a56155d0214015f020000000000000000000000000000000000400078ffff0000000000000000000000000000000000013226983b00400000000000000000000000000000000000000003f00000000001460247016387fd028b5b5107e309020c3a2002840001044c0b6d000000113b0807e309020d0d10736716a30d0a"));

        verifyAttributes(decoder,binary(
                    "2b494e4601fdfd000100b156155d0214015f0200000000000000000000000000000000001f0109070a0102010200001100004207e309020e1c15000100f7003c07080000000000b03226001c00893720101104116165361f00000000000702840001044c0951003f02840001044c0953003f02840001044c0b6e003b02840001044c0952002e02840001044c04db002d02840001044c09eb002402840001044c0b6d003f07e309020e2f11742758740d0a"));

        verifyNull(decoder, binary(
                "2b41434b017f244501010108676231303000000000ffff07e1070b03112d054dfe030d0a"));

    }

}
